<!DOCTYPE html>
<html lang="en">
<head>
    <!--codice con tag meta utile per PWA-->
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!--titolo-->
    <title>Home</title>
    <!--script per attivare ionic-->
    <script type="module" src="https://cdn.jsdelivr.net/npm/@ionic/core/dist/ionic/ionic.esm.js"></script>
    <script nomodule src="https://cdn.jsdelivr.net/npm/@ionic/core/dist/ionic/ionic.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@ionic/core/css/ionic.bundle.css" />
    <!-- Meta Tags required for
       Progressive Web App -->
    <meta name=
    "apple-mobile-web-app-status-bar"
          content="#aa7700">
    <meta name="theme-color"
          content="black">
  
    <!-- Manifest File link -->
    <link rel="manifest"
          href="manifest.json">

    <!--richiamo sw.js per far funzionare la pwa offline-->
    <script>
      if ('serviceWorker' in navigator) {
        navigator.serviceWorker.register('/serviceworker.js')
        .then(function(registration) {
          console.log('Registration successful, scope is:', registration.scope);
        })
        .catch(function(error) {
          console.log('Service worker registration failed, error:', error);
        });
      }
      </script>

    <!--style del form--> 
    <style>
        input[type=text], select {
        width: 100%;
        padding: 12px 20px;
        margin: 8px 0;
        display: inline-block;
        border: 1px solid #ccc;
        border-radius: 4px;
        box-sizing: border-box;
        }
        
        input[type=submit] {
        width: 100%;
        background-color: #4CAF50;
        color: white;
        padding: 14px 20px;
        margin: 8px 0;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        }
        
        input[type=submit]:hover {
        background-color: #45a049;
        }
        
        div {
        border-radius: 5px;
        background-color: #f2f2f2;
        padding: 20px;
        }
        </style>

        <!--script per parziali-->
        <script>
            var metri,secondi,metri2,tempo,x;
            var y;
            var cont=1;
            function stampa()
            { 
                metri=document.form1.metri.value;
                secondi=document.form1.secondi.value;
                metri2=(metri/100);
                let text = "";
                for (; ((cont > metri2) == false); 
                ) {
    tempo = (secondi * cont);
    if ((tempo >= 3000)) {
        x = (tempo % 60);
        tempo = ("50' " 
                    + (x + "" + ""));
    }
    else if ((tempo >= 2940)) {
        x = (tempo % 60);
        tempo = ("49' " 
                    + (x + "" + ""));
    }
    else if ((tempo >= 2880)) {
        x = (tempo % 60);
        tempo = ("48' " 
                    + (x + ""+ ""));
    }
    else if ((tempo >= 2820)) {
        x = (tempo % 60);
        tempo = ("47' " 
                    + (x + "" + ""));
    }
    else if ((tempo >= 2760)) {
        x = (tempo % 60);
        tempo = ("46' " 
                    + (x + "" + ""));
    }
    else if ((tempo >= 2700)) {
        x = (tempo % 60);
        tempo = ("45' " 
                    + (x + "" + ""));
    }
    else if ((tempo >= 2640)) {
        x = (tempo % 60);
        tempo = ("44' " 
                    + (x + "" + ""));
    }
    else if ((tempo >= 2580)) {
        x = (tempo % 60);
        tempo = ("43' " 
                    + (x + "" + ""));
    }
    else if ((tempo >= 2520)) {
        x = (tempo % 60);
        tempo = ("42' " 
                    + (x + "" + ""));
    }
    else if ((tempo >= 2460)) {
        x = (tempo % 60);
        tempo = ("41' " 
                    + (x + ""+""));
    }
    else if ((tempo >= 2400)) {
        x = (tempo % 60);
        tempo = ("40' " 
                    + (x + ""+""));
    }
    else if ((tempo >= 2340)) {
        x = (tempo % 60);
        tempo = ("39' " 
                    + (x + ""+""));
    }
    else if ((tempo >= 2280)) {
        x = (tempo % 60);
        tempo = ("38' " 
                    + (x + ""+""));
    }
    else if ((tempo >= 2220)) {
        x = (tempo % 60);
        tempo = ("37' " 
                    + (x + ""+""));
    }
    else if ((tempo >= 2160)) {
        x = (tempo % 60);
        tempo = ("36' " 
                    + (x + ""+""));
    }
    else if ((tempo >= 2100)) {
        x = (tempo % 60);
        tempo = ("35' " 
                    + (x + ""+""));
    }
    else if ((tempo >= 2040)) {
        x = (tempo % 60);
        tempo = ("34' " 
                    + (x + ""+""));
    }
    else if ((tempo >= 1980)) {
        x = (tempo % 60);
        tempo = ("33' " 
                    + (x + ""+""));
    }
    else if ((tempo >= 1920)) {
        x = (tempo % 60);
        tempo = ("32' " 
                    + (x + ""+""));
    }
    else if ((tempo >= 1860)) {
        x = (tempo % 60);
        tempo = ("31' " 
                    + (x + ""+""));
    }
    else if ((tempo >= 1800)) {
        x = (tempo % 60);
        tempo = ("30' " 
                    + (x + ""+""));
    }
    else if ((tempo >= 1740)) {
        x = (tempo % 60);
        tempo = ("29' " 
                    + (x + ""+""));
    }
    else if ((tempo >= 1680)) {
        x = (tempo % 60);
        tempo = ("28' " 
                    + (x + ""+""));
    }
    else if ((tempo >= 1620)) {
        x = (tempo % 60);
        tempo = ("27' " 
                    + (x + ""+""));
    }
    else if ((tempo >= 1560)) {
        x = (tempo % 60);
        tempo = ("26' " 
                    + (x + ""+""));
    }
    else if ((tempo >= 1500)) {
        x = (tempo % 60);
        tempo = ("25' " 
                    + (x + ""+""));
    }
    else if ((tempo >= 1440)) {
        x = (tempo % 60);
        tempo = ("24' " 
                    + (x + ""+""));
    }
    else if ((tempo >= 1380)) {
        x = (tempo % 60);
        tempo = ("23' " 
                    + (x + ""+""));
    }
    else if ((tempo >= 1320)) {
        x = (tempo % 60);
        tempo = ("22' " 
                    + (x + ""+""));
    }
    else if ((tempo >= 1260)) {
        x = (tempo % 60);
        tempo = ("21' " 
                    + (x + ""+""));
    }
    else if ((tempo >= 1200)) {
        x = (tempo % 60);
        tempo = ("20' " 
                    + (x + ""+""));
    }
    else if ((tempo >= 1140)) {
        x = (tempo % 60);
        tempo = ("19' " 
                    + (x + ""+""));
    }
    else if ((tempo >= 1080)) {
        x = (tempo % 60);
        tempo = ("18' " 
                    + (x + ""+""));
    }
    else if ((tempo >= 1020)) {
        x = (tempo % 60);
        tempo = ("17' " 
                    + (x + ""+""));
    }
    else if ((tempo >= 960)) {
        x = (tempo % 60);
        tempo = ("16' " 
                    + (x + ""+""));
    }
    else if ((tempo >= 900)) {
        x = (tempo % 60);
        tempo = ("15' " 
                    + (x + ""+""));
    }
    else if ((tempo >= 840)) {
        x = (tempo % 60);
        tempo = ("14' " 
                    + (x + ""+""));
    }
    else if ((tempo >= 780)) {
        x = (tempo % 60);
        tempo = ("13' " 
                    + (x + ""+""));
    }
    else if ((tempo >= 720)) {
        x = (tempo % 60);
        tempo = ("12' " 
                    + (x + ""+""));
    }
    else if ((tempo >= 660)) {
        x = (tempo % 60);
        tempo = ("11' " 
                    + (x + ""+""));
    }
    else if ((tempo >= 600)) {
        x = (tempo % 60);
        tempo = ("10' " 
                    + (x + ""+""));
    }
    else if ((tempo >= 540)) {
        x = (tempo % 60);
        tempo = ("9'" 
                    + (x + ""+""));
    }
    else if ((tempo >= 480)) {
        x = (tempo % 60);
        tempo = ("8'" 
                    + (x + ""+""));
    }
    else if ((tempo >= 420)) {
        x = (tempo % 60);
        tempo = ("7'" 
                    + (x + ""+""));
    }
    else if ((tempo >= 360)) {
        x = (tempo % 60);
        tempo = ("6'" 
                    + (x + ""+""));
    }
    else if ((tempo >= 300)) {
        x = (tempo % 60);
        tempo = ("5'" 
                    + (x + ""+""));
    }
    else if ((tempo >= 240)) {
        x = (tempo % 60);
        tempo = ("4'" 
                    + (x + ""+""));
    }
    else if ((tempo >= 180)) {
        x = (tempo % 60);
        tempo = ("3'" 
                    + (x + ""+""));
    }
    else if ((tempo >= 120)) {
        x = (tempo % 60);
        tempo = ("2'" 
                    + (x + ""+""));
                    
    }
    else if ((tempo >= 60)) {
        x = (tempo % 60);
        tempo = ("1'" 
                    + (x + ""+""));
    }
    cont = (cont + 1);
    y=100*cont-100;
    text +=(("Al " + (y + (" passaggio in " + tempo + "\"" )))) + "<br>"
    document.getElementById("demo").innerHTML = text;
    //alert(("Al " + (y + (" passaggio in " + tempo + "\"" )))); //"\"";→simboli per mettere doppi apici "
            }} //fine funzione
            //alert("Se vuoi trovare altri intertempi, premi il pulsante reset") → alert sostituito
        </script>

        <!--script per il reset-->
        <script>
            function reset()
            {
                document.form1.metri.value="";
                document.form1.secondi.value="";
                cont=1;
                document.getElementById("demo").innerHTML = "";
            }
        </script>

        <!--style alert stiloso-->
        <style>
          .alert {
            padding: 20px;
            background-color: #f44336;
            color: white;
          }
          
          .closebtn {
            margin-left: 15px;
            color: white;
            font-weight: bold;
            float: right;
            font-size: 22px;
            line-height: 20px;
            cursor: pointer;
            transition: 0.3s;
          }
          
          .closebtn:hover {
            color: black;
          }
          </style>
    </head>
  <body>
    <div class="ion-page" id="main-content">
              <ion-header>
                <ion-toolbar>
                  <ion-buttons slot="start">
                    <ion-menu-button></ion-menu-button>
                  </ion-buttons>
                  <ion-button color="medium" onclick="location.href='gallery.html'">Gallery</ion-button>
                </ion-toolbar>
              </ion-header>
              <ion-content class="ion-padding">
                <!--alert stilosa che sparisce-->
                <div class="alert">
                  <span class="closebtn" onclick="this.parentElement.style.display='none';">&times;</span> 
                  <strong>Attenzione!</strong> Se vuoi trovare altri intertempi, premi il pulsante reset.
                </div>
                <!--inizio del form-->
                <div>
                    <h2>Programma per calcolare gli intertempi</h2><br>
                    <!--inizio del form-->
                    <form action="/action_page.php" name="form1">
                    <!--input dei metri, ovvero dei metri totali della ripetuta / sessione-->
                    <label for="fname">Metri</label>
                    <input type="text" id="fname" name="metri" placeholder="Inserisci metri totali..">
                    <!--input dei secondi in cui devi percorrere il 100 m-->
                    <label for="lname">Secondi</label>
                    <input type="text" id="lname" name="secondi" placeholder="In quanti secondi ogni 100?">
                    <!--qui ci andrà l'output...-->
                    <p id="demo"></p>
                    <!--button per avviare il programma-->
                    <ion-button expand="block" color="success" onclick="stampa()">Invia</ion-button>
                    <!--button per il reset-->
                    <ion-button expand="block" color="danger" onclick="reset()">Reset</ion-button>
                    </form>
                </div>
              </ion-content>
            </div>
        <script>
            async function openMenu() {
              await menuController.open();
            }
          </script>

                <!--script per il service worker-->
                <script>
                  window.addEventListener('load', () => {
                  registerSW();
                  });
                
                  // Register the Service Worker
                  async function registerSW() {
                  if ('serviceWorker' in navigator) {
                    try {
                    await navigator
                        .serviceWorker
                        .register('serviceworker.js');
                    }
                    catch (e) {
                    console.log('SW registration failed');
                    }
                  }
                  }
                </script>
  </body>
</html>
